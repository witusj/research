<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.551">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Witek ten Hove">

<title>2024-07-18</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="2024-07-29_files/libs/clipboard/clipboard.min.js"></script>
<script src="2024-07-29_files/libs/quarto-html/quarto.js"></script>
<script src="2024-07-29_files/libs/quarto-html/popper.min.js"></script>
<script src="2024-07-29_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="2024-07-29_files/libs/quarto-html/anchor.min.js"></script>
<link href="2024-07-29_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="2024-07-29_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="2024-07-29_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="2024-07-29_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="2024-07-29_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="2024-07-29_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="2024-07-29_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="2024-07-29_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2024-07-18</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Witek ten Hove </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p>Besproken met Joost:</p>
<ul>
<li>Model bouwen voor pairwise ranking.</li>
<li>Performance vergelijken met cardinal ML model</li>
<li>Computation time vergelijken:
<ul>
<li>Lindley recursion &lt;&gt; cardinal ML</li>
<li>Cardinal ML model pairwise ranking vs direct pairwise ranking</li>
</ul></li>
<li>Cardinal ML model met large objective punisment in loss function ontwikkelen</li>
</ul>
<section id="setup-and-load-data" class="level2">
<h2 class="anchored" data-anchor-id="setup-and-load-data">Setup and load data</h2>
<div id="9a4edd97" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functions <span class="im">import</span> generate_all_schedules</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> schedule_class <span class="im">import</span> NewSchedule, generate_schedules, service_time_with_no_shows</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> xgboost <span class="im">as</span> xgb</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split, cross_val_score, StratifiedKFold, GridSearchCV</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, make_scorer, accuracy_score</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.base <span class="im">import</span> clone</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> StratifiedKFold, train_test_split, GridSearchCV</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> chain, combinations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Zero arrays are: [[array([0., 0., 0., 0.])], [], [array([0., 0., 0., 0.]), array([0., 0., 0., 0.]), array([0., 0., 0., 0.])]]</code></pre>
</div>
</div>
<div id="7ce2d9af" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> ScheduleData:</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, N: <span class="bu">int</span>, T: <span class="bu">int</span>, samples, labels):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.N <span class="op">=</span> N</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.T <span class="op">=</span> T</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.samples <span class="op">=</span> samples</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.labels <span class="op">=</span> labels</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> describe_data(<span class="va">self</span>):</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'N = </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>N<span class="sc">}</span><span class="ss">'</span>, <span class="ss">f'T = </span><span class="sc">{</span><span class="va">self</span><span class="sc">.</span>T<span class="sc">}</span><span class="ss">'</span>, <span class="st">'</span><span class="ch">\n</span><span class="st">Samples'</span>,<span class="va">self</span>.samples.tail(<span class="dv">10</span>), <span class="st">'</span><span class="ch">\n</span><span class="st">Labels'</span>, <span class="va">self</span>.labels.tail(<span class="dv">10</span>), sep <span class="op">=</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> create_pair_list(<span class="va">self</span>, n): <span class="co"># Create a set of randomly selected pairs of schedules</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    S <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="bu">len</span>(<span class="va">self</span>.samples)))</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    Q <span class="op">=</span> random.choices(S, k<span class="op">=</span>n)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    P <span class="op">=</span> []</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> q <span class="kw">in</span> Q:</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create a list of possible choices excluding t</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>        possible_choices <span class="op">=</span> [s <span class="cf">for</span> s <span class="kw">in</span> S <span class="cf">if</span> s <span class="op">!=</span> q]</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Choose a random element from the possible choices</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>        p <span class="op">=</span> random.choice(possible_choices)</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Add the chosen element to the result list</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>        P.append(p)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    samples_s1 <span class="op">=</span> <span class="va">self</span>.samples.iloc[Q, :].values.tolist()</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    samples_s2 <span class="op">=</span> <span class="va">self</span>.samples.iloc[P, :].values.tolist()</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.pair_list <span class="op">=</span> <span class="bu">list</span>(<span class="bu">zip</span>(samples_s1, samples_s2))</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.lables_s1 <span class="op">=</span> <span class="va">self</span>.labels.loc[Q, <span class="st">'obj'</span>].values.tolist()</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.lables_s2 <span class="op">=</span> <span class="va">self</span>.labels.loc[P, <span class="st">'obj'</span>].values.tolist()</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.lables_rank <span class="op">=</span> [<span class="dv">1</span> <span class="op">*</span> (<span class="va">self</span>.lables_s1[i] <span class="op">&gt;</span> <span class="va">self</span>.lables_s2[i]) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(<span class="va">self</span>.lables_s1))]</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="va">self</span>.pair_list[:<span class="dv">15</span>], <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, <span class="va">self</span>.lables_s1[:<span class="dv">15</span>], <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, <span class="va">self</span>.lables_s2[:<span class="dv">15</span>], <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, <span class="va">self</span>.lables_rank[:<span class="dv">15</span>])</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> create_neighbors_list(<span class="va">self</span>, n): <span class="co"># Create a set of pairs of schedules that are from the same neighborhood</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Build a subset of random schedules with length n</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    S <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="bu">len</span>(<span class="va">self</span>.samples)))</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>    Q <span class="op">=</span> random.choices(S, k<span class="op">=</span>n)</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>    samples_sub <span class="op">=</span> <span class="va">self</span>.samples.iloc[Q, :].values.tolist()</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>    labels_sub <span class="op">=</span> <span class="va">self</span>.labels.iloc[Q, <span class="dv">7</span>]</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>    <span class="va">self</span>.neighbors_list <span class="op">=</span> []</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># For each schedule in in the subset choose 2 random intervals i, j and swap 1 patient</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> s <span class="kw">in</span> samples_sub:</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>      i <span class="op">=</span> random.choice(<span class="bu">range</span>(<span class="bu">len</span>(s)))  <span class="co"># Ensure i is a valid index in s</span></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>      j <span class="op">=</span> [index <span class="cf">for</span> index, element <span class="kw">in</span> <span class="bu">enumerate</span>(s) <span class="cf">if</span> element <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> index <span class="op">!=</span> i]</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="kw">not</span> j:  <span class="co"># Ensure j is not empty</span></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>          <span class="cf">continue</span></span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>      j <span class="op">=</span> random.choice(j)  <span class="co"># Choose a random valid index from j</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>      s_pair <span class="op">=</span> s.copy()  <span class="co"># Create a copy of s to modify</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>      s_pair[i] <span class="op">=</span> s[i] <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>      s_pair[j] <span class="op">=</span> s[j] <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>      <span class="va">self</span>.neighbors_list.append((s, s_pair))</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(samples_sub, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, <span class="va">self</span>.neighbors_list, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>, labels_sub)</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> calculate_objective(<span class="va">self</span>, schedule, s, d, q):</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>    s <span class="op">=</span> service_time_with_no_shows(s, q) <span class="co"># Adjust service times distribution for no-shows</span></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>    sp <span class="op">=</span> np.array([<span class="dv">1</span>], dtype<span class="op">=</span>np.int64) <span class="co"># Set probability of first spillover time being zero to 1</span></span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>    wt_list <span class="op">=</span> [] <span class="co"># Initialize wt_list for saving all waiting times for all patients in the schedule</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>    ewt <span class="op">=</span> <span class="dv">0</span> <span class="co"># Initialize sum of expected waiting times</span></span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> x <span class="kw">in</span> schedule: <span class="co"># For each interval -</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(x <span class="op">==</span> <span class="dv">0</span>): <span class="co"># In case there are no patients,</span></span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>        wt_temp <span class="op">=</span> [np.array(sp)] <span class="co"># the spillover from the previous interval is recorded,</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>        wt_list.append([]) <span class="co"># but there are no waiting times.</span></span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>        sp <span class="op">=</span> [] <span class="co"># Initialize the spillover time distribution </span></span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>        sp.append(np.<span class="bu">sum</span>(wt_temp[<span class="op">-</span><span class="dv">1</span>][:d<span class="op">+</span><span class="dv">1</span>])) <span class="co"># All the work from the previous interval's spillover that could not be processed will be added to the this interval's spillover.</span></span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>        sp[<span class="dv">1</span>:] <span class="op">=</span> wt_temp[<span class="op">-</span><span class="dv">1</span>][d<span class="op">+</span><span class="dv">1</span>:]</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>: <span class="co"># In case there are patients scheduled,</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>        wt_temp <span class="op">=</span> [np.array(sp)] <span class="co"># Initialize wt_temp for saving all waiting times for all patients in the interval. The first patient has to wait for the spillover work from the previous period.</span></span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>        ewt <span class="op">+=</span> np.dot(<span class="bu">range</span>(<span class="bu">len</span>(sp)), sp) <span class="co"># Add waiting time for first patient in interval</span></span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(x<span class="op">-</span><span class="dv">1</span>): <span class="co"># For each patient</span></span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>          wt <span class="op">=</span> np.convolve(wt_temp[i], s) <span class="co"># Calculate the waiting time distribution</span></span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>          wt_temp.append(wt)</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>          ewt <span class="op">+=</span> np.dot(<span class="bu">range</span>(<span class="bu">len</span>(wt)), wt)</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>        wt_list.append(wt_temp)</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>        sp <span class="op">=</span> []</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>        sp.append(np.<span class="bu">sum</span>(np.convolve(wt_temp[<span class="op">-</span><span class="dv">1</span>],s)[:d<span class="op">+</span><span class="dv">1</span>])) <span class="co"># Calculate the spillover</span></span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>        sp[<span class="dv">1</span>:] <span class="op">=</span> np.convolve(wt_temp[<span class="op">-</span><span class="dv">1</span>],s)[d<span class="op">+</span><span class="dv">1</span>:]</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Schedule: </span><span class="sc">{</span>schedule<span class="sc">}</span><span class="ss">, ewt = </span><span class="sc">{</span>ewt<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'./experiments/data.pickle'</span>, <span class="st">'rb'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>  sch_data: ScheduleData <span class="op">=</span> pickle.load(<span class="bu">file</span>)</span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>sch_data.description</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>sch_data.describe_data()</span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>sch_data.create_pair_list(<span class="dv">16000</span>)</span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>sch_data.create_neighbors_list(<span class="dv">10</span>)</span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>test_sch <span class="op">=</span> sch_data.neighbors_list[<span class="dv">1</span>][<span class="dv">0</span>]</span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>sch_data.calculate_objective(test_sch, [<span class="fl">0.0</span>, <span class="fl">0.27</span>, <span class="fl">0.28</span>, <span class="fl">0.2</span>, <span class="fl">0.15</span>, <span class="fl">0.1</span>], <span class="dv">3</span>, <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>N = 10
T = 7

Samples
      x_0  x_1  x_2  x_3  x_4  x_5  x_6
7998    8    1    0    1    0    0    0
7999    8    1    1    0    0    0    0
8000    8    2    0    0    0    0    0
8001    9    0    0    0    0    0    1
8002    9    0    0    0    0    1    0
8003    9    0    0    0    1    0    0
8004    9    0    0    1    0    0    0
8005    9    0    1    0    0    0    0
8006    9    1    0    0    0    0    0
8007   10    0    0    0    0    0    0

Labels
        ew_0       ew_1       ew_2      ew_3      ew_4      ew_5    ew_6  \
7998  56.672  13.192158   0.000000  9.241482  0.000000  0.000000  0.0000   
7999  56.672  13.192158  12.217911  0.000000  0.000000  0.000000  0.0000   
8000  56.672  28.408317   0.000000  0.000000  0.000000  0.000000  0.0000   
8001  72.864   0.000000   0.000000  0.000000  0.000000  0.000000  1.9547   
8002  72.864   0.000000   0.000000  0.000000  0.000000  3.858871  0.0000   
8003  72.864   0.000000   0.000000  0.000000  6.380606  0.000000  0.0000   
8004  72.864   0.000000   0.000000  9.241482  0.000000  0.000000  0.0000   
8005  72.864   0.000000  12.217883  0.000000  0.000000  0.000000  0.0000   
8006  72.864  15.216038   0.000000  0.000000  0.000000  0.000000  0.0000   
8007  91.080   0.000000   0.000000  0.000000  0.000000  0.000000  0.0000   

            obj  obj_rank  
7998  79.105640    7964.5  
7999  82.082070    7978.0  
8000  85.080317    7987.5  
8001  74.818700    7911.0  
8002  76.722871    7945.5  
8003  79.244606    7968.0  
8004  82.105482    7982.5  
8005  85.081883    7993.0  
8006  88.080038    7998.5  
8007  91.080000    8005.0  
[([0, 3, 0, 2, 1, 2, 2], [7, 3, 0, 0, 0, 0, 0]), ([1, 0, 4, 1, 0, 3, 1], [5, 0, 1, 1, 3, 0, 0]), ([2, 3, 0, 3, 2, 0, 0], [0, 0, 0, 4, 0, 2, 4]), ([0, 2, 0, 2, 0, 4, 2], [0, 0, 4, 0, 0, 5, 1]), ([0, 2, 3, 0, 1, 1, 3], [0, 4, 3, 2, 1, 0, 0]), ([1, 2, 2, 0, 4, 0, 1], [2, 1, 5, 0, 1, 0, 1]), ([1, 0, 0, 0, 0, 7, 2], [5, 0, 0, 0, 4, 1, 0]), ([4, 0, 2, 1, 2, 1, 0], [0, 1, 4, 1, 1, 0, 3]), ([4, 0, 1, 0, 3, 0, 2], [1, 5, 0, 0, 0, 2, 2]), ([5, 4, 0, 0, 0, 0, 1], [1, 4, 2, 2, 0, 0, 1]), ([1, 1, 4, 1, 0, 2, 1], [0, 1, 5, 0, 2, 0, 2]), ([3, 0, 1, 3, 2, 0, 1], [0, 6, 1, 1, 1, 0, 1]), ([0, 1, 2, 2, 1, 1, 3], [5, 1, 0, 0, 2, 0, 2]), ([3, 1, 0, 3, 1, 0, 2], [3, 1, 0, 3, 3, 0, 0]), ([0, 3, 4, 0, 0, 1, 2], [0, 5, 0, 1, 4, 0, 0])] 
 [27.023927392923355, 34.469865262399985, 37.64460852034061, 30.861540327954337, 26.943199465135507, 27.619951203550176, 66.86529163264007, 35.42147029903314, 27.872058851772262, 62.85854243596153, 29.65179953486278, 29.090887618580194, 25.12878070573183, 26.59089780477805, 40.97090533376224] 
 [82.08193744896006, 43.07063635088127, 46.31149598123311, 44.568557947202024, 61.349811984034645, 37.327299669298824, 40.76547031869863, 34.52406351149628, 31.460877568871844, 43.68643543841285, 41.060491843406325, 58.81602982730768, 36.75594083508167, 35.97342699688902, 50.93457785107282] 
 [0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0]
[[0, 4, 0, 1, 1, 3, 1], [0, 0, 1, 0, 6, 3, 0], [0, 4, 0, 0, 2, 3, 1], [2, 4, 1, 2, 0, 1, 0], [1, 1, 1, 1, 3, 0, 3], [0, 3, 0, 4, 0, 2, 1], [0, 0, 1, 3, 1, 2, 3], [4, 1, 0, 3, 0, 0, 2], [0, 1, 0, 4, 0, 1, 4], [0, 0, 1, 4, 0, 0, 5]] 
 [([0, 4, 0, 1, 1, 3, 1], [1, 4, 0, 1, 1, 3, 0]), ([0, 0, 1, 0, 6, 3, 0], [1, 0, 1, 0, 6, 2, 0]), ([0, 4, 0, 0, 2, 3, 1], [1, 4, 0, 0, 2, 2, 1]), ([2, 4, 1, 2, 0, 1, 0], [2, 4, 1, 3, 0, 0, 0]), ([1, 1, 1, 1, 3, 0, 3], [1, 1, 1, 2, 3, 0, 2]), ([0, 3, 0, 4, 0, 2, 1], [0, 2, 0, 5, 0, 2, 1]), ([0, 0, 1, 3, 1, 2, 3], [0, 0, 1, 2, 1, 3, 3]), ([4, 1, 0, 3, 0, 0, 2], [5, 1, 0, 2, 0, 0, 2]), ([0, 1, 0, 4, 0, 1, 4], [1, 1, 0, 4, 0, 0, 4]), ([0, 0, 1, 4, 0, 0, 5], [0, 0, 0, 4, 1, 0, 5])] 
 2578    32.681091
334     63.871714
2557    33.858171
6218    44.195218
3937    19.106716
2313    36.300961
431     35.913002
7340    33.461560
1166    35.007048
450     38.381191
Name: obj, dtype: float64
Schedule: [0, 0, 1, 0, 6, 3, 0], ewt = 63.87171379200005</code></pre>
</div>
</div>
<section id="flow-chart-of-objective-calculation-method" class="level3">
<h3 class="anchored" data-anchor-id="flow-chart-of-objective-calculation-method">Flow chart of objective calculation method</h3>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
    A[Start] --&gt; B[Adjust service times distribution for no-shows]
    B --&gt; C[Set probability of first spillover time being zero to 1]
    C --&gt; D[Initialize wt_list and ewt &lt;/br&gt; for saving waiting times distributions and &lt;/br&gt;accumulated expected waiting time]
    D --&gt; E[Loop through each interval in schedule]
    
    E --&gt; F{Is x == 0?}
    
    F --&gt;|Yes| G[Record spillover from previous interval]
    G --&gt; H[Append empty list to wt_list]
    H --&gt; I[Initialize spillover time distribution]
    I --&gt; J[Calculate spillover for next interval]
    J --&gt; K[Continue to next interval]

    F --&gt;|No| L[Initialize wt_temp for current interval]
    L --&gt; M[Add spillover from previous interval &lt;/br&gt;as waiting time for first patient in current interval]
    M --&gt; N[Loop through each patient in interval]
    
    N --&gt; O[Calculate waiting time distribution for current patient]
    O --&gt; P[Append waiting time distribution to wt_temp]
    P --&gt; Q[Add expected waiting time for current patient to ewt]
    Q --&gt; R[Append wt_temp to wt_list]
    
    R --&gt; S[Initialize spillover time distribution]
    S --&gt; T[Calculate spillover for next interval]
    T --&gt; K[Continue to next interval]
    
    K --&gt; U[Print wt_list]
    U --&gt; V[Print schedule and ewt]
    V --&gt; W[End]

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="flow-chart-data-preparation" class="level3">
<h3 class="anchored" data-anchor-id="flow-chart-data-preparation">Flow chart data preparation</h3>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TD
    A["Create features"] --&gt;|"option 1"| B["from population"]
    A["Create features"] --&gt;|"option 2"| C["random subset"]
    B --&gt; D["Create pairs"]
    C --&gt; D["Create pairs"]
    D["Create pairs"] --&gt;|"option 1"| E["random"]
    D["Create pairs"] --&gt;|"option 2"| F["neighbors"]
    E --&gt; G["Create labels"]
    F --&gt; G["Create labels"]
    G["Create labels"] --&gt;|"option 1"| H["objective"]
    G["Create labels"] --&gt;|"option 2"| I["ranking"]
    H --&gt; J["Split dataset"]
    I --&gt; J["Split dataset"]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<div id="9bbff791" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Parameters</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate number of possible schedules</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>num_schedules <span class="op">=</span> math.comb(N <span class="op">+</span> T <span class="op">-</span> <span class="dv">1</span>, N)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Number of possible schedules: </span><span class="sc">{</span>num_schedules<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Memory per schedule (in bytes)</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>memory_per_schedule <span class="op">=</span> <span class="dv">4</span> <span class="op">*</span> T  <span class="co"># 4 bytes per integer, T integers per schedule</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Memory per schedule: </span><span class="sc">{</span>memory_per_schedule<span class="sc">}</span><span class="ss"> bytes"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Total memory required (in bytes)</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>total_memory_bytes <span class="op">=</span> num_schedules <span class="op">*</span> memory_per_schedule</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>total_memory_gb <span class="op">=</span> total_memory_bytes <span class="op">/</span> (<span class="dv">1024</span> <span class="op">**</span> <span class="dv">3</span>)  <span class="co"># Convert bytes to gigabytes</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Total memory required: </span><span class="sc">{</span>total_memory_bytes<span class="sc">}</span><span class="ss"> bytes"</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Total memory required: </span><span class="sc">{</span>total_memory_gb<span class="sc">:.2f}</span><span class="ss"> GB"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of possible schedules: 51895935
Memory per schedule: 72 bytes
Total memory required: 3736507320 bytes
Total memory required: 3.48 GB</code></pre>
</div>
</div>
<div id="058811c6" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">8</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>population <span class="op">=</span> generate_all_schedules(N, T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of possible schedules: 75582</code></pre>
</div>
</div>
<div id="0cc94d17" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations_with_replacement</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_all_schedules(N, T):</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> itertools <span class="im">import</span> combinations_with_replacement</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    pop_size <span class="op">=</span> math.comb(N<span class="op">+</span>T<span class="op">-</span><span class="dv">1</span>, N)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Number of possible schedules: </span><span class="sc">{</span>pop_size<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate the combinations</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    schedules <span class="op">=</span> <span class="bu">list</span>(combinations_with_replacement(<span class="bu">range</span>(T), N))</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    end_time <span class="op">=</span> time.time()</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert combinations into the desired format</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    timing <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    counter <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> comb <span class="kw">in</span> schedules:</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>        counter <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Start timing</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        start_time <span class="op">=</span> time.time()</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        schedule <span class="op">=</span> [<span class="dv">0</span>] <span class="op">*</span> T</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> slot <span class="kw">in</span> comb:</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>            schedule[slot] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>            <span class="co"># End timing</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        result.append(schedule)</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>        end_time <span class="op">=</span> time.time()</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>        timing <span class="op">+=</span> end_time <span class="op">-</span> start_time</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>        average_timing <span class="op">=</span> timing <span class="op">/</span> counter</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        remaining <span class="op">=</span> (pop_size <span class="op">-</span> counter) <span class="op">*</span> average_timing</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Created </span><span class="sc">{</span>counter<span class="sc">}</span><span class="ss"> schedules in </span><span class="sc">{</span>timing<span class="sc">}</span><span class="ss"> secs.</span><span class="ch">\n</span><span class="ss">Remaining </span><span class="sc">{</span>pop_size <span class="op">-</span> counter<span class="sc">}</span><span class="ss"> schedules in est. </span><span class="sc">{</span>remaining<span class="sc">}</span><span class="ss"> secs."</span>)</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>schedules <span class="op">=</span> generate_all_schedules(N, T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of possible schedules: 330
Created 1 schedules in 2.1457672119140625e-06 secs.
Remaining 329 schedules in est. 0.0007059574127197266 secs.
Created 2 schedules in 4.291534423828125e-06 secs.
Remaining 328 schedules in est. 0.0007038116455078125 secs.
Created 3 schedules in 5.245208740234375e-06 secs.
Remaining 327 schedules in est. 0.0005717277526855469 secs.
Created 4 schedules in 5.245208740234375e-06 secs.
Remaining 326 schedules in est. 0.00042748451232910156 secs.
Created 5 schedules in 6.198883056640625e-06 secs.
Remaining 325 schedules in est. 0.0004029273986816406 secs.
Created 6 schedules in 7.152557373046875e-06 secs.
Remaining 324 schedules in est. 0.00038623809814453125 secs.
Created 7 schedules in 7.152557373046875e-06 secs.
Remaining 323 schedules in est. 0.0003300394330705915 secs.
Created 8 schedules in 7.152557373046875e-06 secs.
Remaining 322 schedules in est. 0.0002878904342651367 secs.
Created 9 schedules in 7.152557373046875e-06 secs.
Remaining 321 schedules in est. 0.0002551078796386719 secs.
Created 10 schedules in 7.152557373046875e-06 secs.
Remaining 320 schedules in est. 0.0002288818359375 secs.
Created 11 schedules in 8.106231689453125e-06 secs.
Remaining 319 schedules in est. 0.00023508071899414062 secs.
Created 12 schedules in 9.059906005859375e-06 secs.
Remaining 318 schedules in est. 0.00024008750915527344 secs.
Created 13 schedules in 9.059906005859375e-06 secs.
Remaining 317 schedules in est. 0.00022092232337364782 secs.
Created 14 schedules in 1.0013580322265625e-05 secs.
Remaining 316 schedules in est. 0.00022602081298828125 secs.
Created 15 schedules in 1.0728836059570312e-05 secs.
Remaining 315 schedules in est. 0.00022530555725097656 secs.
Created 16 schedules in 1.0728836059570312e-05 secs.
Remaining 314 schedules in est. 0.00021055340766906738 secs.
Created 17 schedules in 1.1920928955078125e-05 secs.
Remaining 313 schedules in est. 0.00021948533899643843 secs.
Created 18 schedules in 1.1920928955078125e-05 secs.
Remaining 312 schedules in est. 0.00020662943522135416 secs.
Created 19 schedules in 1.2874603271484375e-05 secs.
Remaining 311 schedules in est. 0.00021073692723324423 secs.
Created 20 schedules in 1.2874603271484375e-05 secs.
Remaining 310 schedules in est. 0.0001995563507080078 secs.
Created 21 schedules in 1.3828277587890625e-05 secs.
Remaining 309 schedules in est. 0.00020347322736467634 secs.
Created 22 schedules in 1.3828277587890625e-05 secs.
Remaining 308 schedules in est. 0.00019359588623046875 secs.
Created 23 schedules in 1.4781951904296875e-05 secs.
Remaining 307 schedules in est. 0.00019730692324431047 secs.
Created 24 schedules in 1.4781951904296875e-05 secs.
Remaining 306 schedules in est. 0.00018846988677978516 secs.
Created 25 schedules in 1.5974044799804688e-05 secs.
Remaining 305 schedules in est. 0.0001948833465576172 secs.
Created 26 schedules in 1.5974044799804688e-05 secs.
Remaining 304 schedules in est. 0.00018677344689002406 secs.
Created 27 schedules in 1.6927719116210938e-05 secs.
Remaining 303 schedules in est. 0.0001899666256374783 secs.
Created 28 schedules in 1.6927719116210938e-05 secs.
Remaining 302 schedules in est. 0.0001825775418962751 secs.
Created 29 schedules in 1.6927719116210938e-05 secs.
Remaining 301 schedules in est. 0.00017569805013722386 secs.
Created 30 schedules in 1.7642974853515625e-05 secs.
Remaining 300 schedules in est. 0.00017642974853515625 secs.
Created 31 schedules in 1.8835067749023438e-05 secs.
Remaining 299 schedules in est. 0.00018166726635348413 secs.
Created 32 schedules in 1.9788742065429688e-05 secs.
Remaining 298 schedules in est. 0.00018428266048431396 secs.
Created 33 schedules in 2.0742416381835938e-05 secs.
Remaining 297 schedules in est. 0.00018668174743652344 secs.
Created 34 schedules in 2.1696090698242188e-05 secs.
Remaining 296 schedules in est. 0.00018888361313763784 secs.
Created 35 schedules in 2.1696090698242188e-05 secs.
Remaining 295 schedules in est. 0.00018286705017089844 secs.
Created 36 schedules in 2.2649765014648438e-05 secs.
Remaining 294 schedules in est. 0.00018497308095296225 secs.
Created 37 schedules in 2.2649765014648438e-05 secs.
Remaining 293 schedules in est. 0.00017936165268356735 secs.
Created 38 schedules in 2.3603439331054688e-05 secs.
Remaining 292 schedules in est. 0.00018137379696494654 secs.
Created 39 schedules in 2.3603439331054688e-05 secs.
Remaining 291 schedules in est. 0.0001761179703932542 secs.
Created 40 schedules in 2.3603439331054688e-05 secs.
Remaining 290 schedules in est. 0.00017112493515014648 secs.
Created 41 schedules in 2.3603439331054688e-05 secs.
Remaining 289 schedules in est. 0.0001663754626018245 secs.
Created 42 schedules in 2.3603439331054688e-05 secs.
Remaining 288 schedules in est. 0.00016185215541294644 secs.
Created 43 schedules in 2.3603439331054688e-05 secs.
Remaining 287 schedules in est. 0.00015753923460494642 secs.
Created 44 schedules in 2.3603439331054688e-05 secs.
Remaining 286 schedules in est. 0.00015342235565185547 secs.
Created 45 schedules in 2.3603439331054688e-05 secs.
Remaining 285 schedules in est. 0.0001494884490966797 secs.
Created 46 schedules in 2.3603439331054688e-05 secs.
Remaining 284 schedules in est. 0.00014572558195694632 secs.
Created 47 schedules in 2.3603439331054688e-05 secs.
Remaining 283 schedules in est. 0.00014212283682315906 secs.
Created 48 schedules in 2.3603439331054688e-05 secs.
Remaining 282 schedules in est. 0.0001386702060699463 secs.
Created 49 schedules in 2.3603439331054688e-05 secs.
Remaining 281 schedules in est. 0.00013535849902094626 secs.
Created 50 schedules in 2.3603439331054688e-05 secs.
Remaining 280 schedules in est. 0.00013217926025390624 secs.
Created 51 schedules in 2.3603439331054688e-05 secs.
Remaining 279 schedules in est. 0.00012912469751694624 secs.
Created 52 schedules in 2.3603439331054688e-05 secs.
Remaining 278 schedules in est. 0.00012618761796217697 secs.
Created 53 schedules in 2.3603439331054688e-05 secs.
Remaining 277 schedules in est. 0.00012336137159815375 secs.
Created 54 schedules in 2.3603439331054688e-05 secs.
Remaining 276 schedules in est. 0.00012063980102539062 secs.
Created 55 schedules in 2.3603439331054688e-05 secs.
Remaining 275 schedules in est. 0.00011801719665527344 secs.
Created 56 schedules in 2.3603439331054688e-05 secs.
Remaining 274 schedules in est. 0.00011548825672694614 secs.
Created 57 schedules in 2.4557113647460938e-05 secs.
Remaining 273 schedules in est. 0.00011761564957468133 secs.
Created 58 schedules in 2.5272369384765625e-05 secs.
Remaining 272 schedules in est. 0.00011851869780441811 secs.
Created 59 schedules in 2.5272369384765625e-05 secs.
Remaining 271 schedules in est. 0.00011608156107239804 secs.
Created 60 schedules in 2.5272369384765625e-05 secs.
Remaining 270 schedules in est. 0.00011372566223144531 secs.
Created 61 schedules in 2.6226043701171875e-05 secs.
Remaining 269 schedules in est. 0.00011565255337074155 secs.
Created 62 schedules in 2.7179718017578125e-05 secs.
Remaining 268 schedules in est. 0.00011748652304372479 secs.
Created 63 schedules in 2.8133392333984375e-05 secs.
Remaining 267 schedules in est. 0.00011923199608212425 secs.
Created 64 schedules in 2.8133392333984375e-05 secs.
Remaining 266 schedules in est. 0.00011692941188812256 secs.
Created 65 schedules in 2.9087066650390625e-05 secs.
Remaining 265 schedules in est. 0.00011858573326697716 secs.
Created 66 schedules in 3.0040740966796875e-05 secs.
Remaining 264 schedules in est. 0.0001201629638671875 secs.
Created 67 schedules in 3.0994415283203125e-05 secs.
Remaining 263 schedules in est. 0.00012166464506690182 secs.
Created 68 schedules in 3.1948089599609375e-05 secs.
Remaining 262 schedules in est. 0.00012309410992790673 secs.
Created 69 schedules in 3.2901763916015625e-05 secs.
Remaining 261 schedules in est. 0.00012445449829101562 secs.
Created 70 schedules in 3.2901763916015625e-05 secs.
Remaining 260 schedules in est. 0.00012220655168805803 secs.
Created 71 schedules in 3.2901763916015625e-05 secs.
Remaining 259 schedules in est. 0.00012002192752462038 secs.
Created 72 schedules in 3.409385681152344e-05 secs.
Remaining 258 schedules in est. 0.00012216965357462564 secs.
Created 73 schedules in 3.504753112792969e-05 secs.
Remaining 257 schedules in est. 0.00012338651369695795 secs.
Created 74 schedules in 3.600120544433594e-05 secs.
Remaining 256 schedules in est. 0.00012454471072635134 secs.
Created 75 schedules in 3.600120544433594e-05 secs.
Remaining 255 schedules in est. 0.00012240409851074218 secs.
Created 76 schedules in 3.600120544433594e-05 secs.
Remaining 254 schedules in est. 0.0001203198181955438 secs.
Created 77 schedules in 3.719329833984375e-05 secs.
Remaining 253 schedules in est. 0.00012220655168805803 secs.
Created 78 schedules in 3.838539123535156e-05 secs.
Remaining 252 schedules in est. 0.00012401434091421275 secs.
Created 79 schedules in 3.933906555175781e-05 secs.
Remaining 251 schedules in est. 0.00012498867662647103 secs.
Created 80 schedules in 4.029273986816406e-05 secs.
Remaining 250 schedules in est. 0.0001259148120880127 secs.
Created 81 schedules in 4.1484832763671875e-05 secs.
Remaining 249 schedules in est. 0.00012752744886610244 secs.
Created 82 schedules in 4.220008850097656e-05 secs.
Remaining 248 schedules in est. 0.00012762953595417303 secs.
Created 83 schedules in 4.315376281738281e-05 secs.
Remaining 247 schedules in est. 0.0001284214387457055 secs.
Created 84 schedules in 4.315376281738281e-05 secs.
Remaining 246 schedules in est. 0.00012637887682233538 secs.
Created 85 schedules in 4.315376281738281e-05 secs.
Remaining 245 schedules in est. 0.00012438437517951518 secs.
Created 86 schedules in 4.315376281738281e-05 secs.
Remaining 244 schedules in est. 0.0001224362572958303 secs.
Created 87 schedules in 4.4345855712890625e-05 secs.
Remaining 243 schedules in est. 0.00012386256250841864 secs.
Created 88 schedules in 4.5299530029296875e-05 secs.
Remaining 242 schedules in est. 0.0001245737075805664 secs.
Created 89 schedules in 4.6253204345703125e-05 secs.
Remaining 241 schedules in est. 0.00012524744098106128 secs.
Created 90 schedules in 4.6253204345703125e-05 secs.
Remaining 240 schedules in est. 0.00012334187825520832 secs.
Created 91 schedules in 4.6253204345703125e-05 secs.
Remaining 239 schedules in est. 0.00012147819602882469 secs.
Created 92 schedules in 4.6253204345703125e-05 secs.
Remaining 238 schedules in est. 0.00011965502863344939 secs.
Created 93 schedules in 4.7206878662109375e-05 secs.
Remaining 237 schedules in est. 0.00012030140046150453 secs.
Created 94 schedules in 4.8160552978515625e-05 secs.
Remaining 236 schedules in est. 0.00012091372875457115 secs.
Created 95 schedules in 4.935264587402344e-05 secs.
Remaining 235 schedules in est. 0.0001220828608462685 secs.
Created 96 schedules in 5.030632019042969e-05 secs.
Remaining 234 schedules in est. 0.00012262165546417236 secs.
Created 97 schedules in 5.030632019042969e-05 secs.
Remaining 233 schedules in est. 0.0001208388928285579 secs.
Created 98 schedules in 5.030632019042969e-05 secs.
Remaining 232 schedules in est. 0.00011909251310387435 secs.
Created 99 schedules in 5.030632019042969e-05 secs.
Remaining 231 schedules in est. 0.00011738141377766928 secs.
Created 100 schedules in 5.125999450683594e-05 secs.
Remaining 230 schedules in est. 0.00011789798736572266 secs.
Created 101 schedules in 5.221366882324219e-05 secs.
Remaining 229 schedules in est. 0.00011838544713388576 secs.
Created 102 schedules in 5.340576171875e-05 secs.
Remaining 228 schedules in est. 0.00011937758501838236 secs.
Created 103 schedules in 5.435943603515625e-05 secs.
Remaining 227 schedules in est. 0.00011980186388330552 secs.
Created 104 schedules in 5.53131103515625e-05 secs.
Remaining 226 schedules in est. 0.00012019964364858775 secs.
Created 105 schedules in 5.53131103515625e-05 secs.
Remaining 225 schedules in est. 0.00011852809361049108 secs.
Created 106 schedules in 5.53131103515625e-05 secs.
Remaining 224 schedules in est. 0.00011688808225235848 secs.
Created 107 schedules in 5.53131103515625e-05 secs.
Remaining 223 schedules in est. 0.00011527872531213491 secs.
Created 108 schedules in 5.53131103515625e-05 secs.
Remaining 222 schedules in est. 0.00011369917127821181 secs.
Created 109 schedules in 5.626678466796875e-05 secs.
Remaining 221 schedules in est. 0.00011408219643689076 secs.
Created 110 schedules in 5.626678466796875e-05 secs.
Remaining 220 schedules in est. 0.0001125335693359375 secs.
Created 111 schedules in 5.7220458984375e-05 secs.
Remaining 219 schedules in est. 0.00011289441907728041 secs.
Created 112 schedules in 5.841255187988281e-05 secs.
Remaining 218 schedules in est. 0.00011369585990905762 secs.
Created 113 schedules in 5.936622619628906e-05 secs.
Remaining 217 schedules in est. 0.00011400416889021883 secs.
Created 114 schedules in 5.936622619628906e-05 secs.
Remaining 216 schedules in est. 0.00011248337595086349 secs.
Created 115 schedules in 5.936622619628906e-05 secs.
Remaining 215 schedules in est. 0.0001109890315843665 secs.
Created 116 schedules in 5.936622619628906e-05 secs.
Remaining 214 schedules in est. 0.00010952045177591259 secs.
Created 117 schedules in 6.031990051269531e-05 secs.
Remaining 213 schedules in est. 0.00010981315221541966 secs.
Created 118 schedules in 6.103515625e-05 secs.
Remaining 212 schedules in est. 0.00010965638241525424 secs.
Created 119 schedules in 6.198883056640625e-05 secs.
Remaining 211 schedules in est. 0.00010991296848329175 secs.
Created 120 schedules in 6.29425048828125e-05 secs.
Remaining 210 schedules in est. 0.00011014938354492189 secs.
Created 121 schedules in 6.389617919921875e-05 secs.
Remaining 209 schedules in est. 0.00011036612770774148 secs.
Created 122 schedules in 6.389617919921875e-05 secs.
Remaining 208 schedules in est. 0.00010893774814293034 secs.
Created 123 schedules in 6.389617919921875e-05 secs.
Remaining 207 schedules in est. 0.00010753259426209984 secs.
Created 124 schedules in 6.389617919921875e-05 secs.
Remaining 206 schedules in est. 0.00010615010415354082 secs.
Created 125 schedules in 6.4849853515625e-05 secs.
Remaining 205 schedules in est. 0.00010635375976562501 secs.
Created 126 schedules in 6.604194641113281e-05 secs.
Remaining 204 schedules in est. 0.00010692505609421504 secs.
Created 127 schedules in 6.699562072753906e-05 secs.
Remaining 203 schedules in est. 0.00010708748824953095 secs.
Created 128 schedules in 6.699562072753906e-05 secs.
Remaining 202 schedules in est. 0.00010572746396064758 secs.
Created 129 schedules in 6.699562072753906e-05 secs.
Remaining 201 schedules in est. 0.00010438852531965388 secs.
Created 130 schedules in 6.699562072753906e-05 secs.
Remaining 200 schedules in est. 0.00010307018573467547 secs.
Created 131 schedules in 6.699562072753906e-05 secs.
Remaining 199 schedules in est. 0.00010177197347160514 secs.
Created 132 schedules in 6.699562072753906e-05 secs.
Remaining 198 schedules in est. 0.0001004934310913086 secs.
Created 133 schedules in 6.794929504394531e-05 secs.
Remaining 197 schedules in est. 0.00010064670017787388 secs.
Created 134 schedules in 6.890296936035156e-05 secs.
Remaining 196 schedules in est. 0.00010078344772111124 secs.
Created 135 schedules in 6.890296936035156e-05 secs.
Remaining 195 schedules in est. 9.95265112982856e-05 secs.
Created 136 schedules in 6.890296936035156e-05 secs.
Remaining 194 schedules in est. 9.828805923461914e-05 secs.
Created 137 schedules in 6.890296936035156e-05 secs.
Remaining 193 schedules in est. 9.7067686763123e-05 secs.
Created 138 schedules in 6.890296936035156e-05 secs.
Remaining 192 schedules in est. 9.586500084918478e-05 secs.
Created 139 schedules in 6.890296936035156e-05 secs.
Remaining 191 schedules in est. 9.467961976854064e-05 secs.
Created 140 schedules in 6.985664367675781e-05 secs.
Remaining 190 schedules in est. 9.480544498988561e-05 secs.
Created 141 schedules in 7.081031799316406e-05 secs.
Remaining 189 schedules in est. 9.49159581610497e-05 secs.
Created 142 schedules in 7.200241088867188e-05 secs.
Remaining 188 schedules in est. 9.532713554274867e-05 secs.
Created 143 schedules in 7.200241088867188e-05 secs.
Remaining 187 schedules in est. 9.415699885441708e-05 secs.
Created 144 schedules in 7.200241088867188e-05 secs.
Remaining 186 schedules in est. 9.300311406453451e-05 secs.
Created 145 schedules in 7.200241088867188e-05 secs.
Remaining 185 schedules in est. 9.186514492692619e-05 secs.
Created 146 schedules in 7.295608520507812e-05 secs.
Remaining 184 schedules in est. 9.194465532694778e-05 secs.
Created 147 schedules in 7.367134094238281e-05 secs.
Remaining 183 schedules in est. 9.171330198949696e-05 secs.
Created 148 schedules in 7.367134094238281e-05 secs.
Remaining 182 schedules in est. 9.059583818590318e-05 secs.
Created 149 schedules in 7.367134094238281e-05 secs.
Remaining 181 schedules in est. 8.949337389645159e-05 secs.
Created 150 schedules in 7.367134094238281e-05 secs.
Remaining 180 schedules in est. 8.840560913085938e-05 secs.
Created 151 schedules in 7.462501525878906e-05 secs.
Remaining 179 schedules in est. 8.846276643260425e-05 secs.
Created 152 schedules in 7.581710815429688e-05 secs.
Remaining 178 schedules in est. 8.878582402279502e-05 secs.
Created 153 schedules in 7.677078247070312e-05 secs.
Remaining 177 schedules in est. 8.881325815238204e-05 secs.
Created 154 schedules in 7.748603820800781e-05 secs.
Remaining 176 schedules in est. 8.855547223772322e-05 secs.
Created 155 schedules in 7.843971252441406e-05 secs.
Remaining 175 schedules in est. 8.856096575337071e-05 secs.
Created 156 schedules in 7.843971252441406e-05 secs.
Remaining 174 schedules in est. 8.749044858492338e-05 secs.
Created 157 schedules in 7.843971252441406e-05 secs.
Remaining 173 schedules in est. 8.643356857785754e-05 secs.
Created 158 schedules in 7.843971252441406e-05 secs.
Remaining 172 schedules in est. 8.539006679872923e-05 secs.
Created 159 schedules in 7.843971252441406e-05 secs.
Remaining 171 schedules in est. 8.435969082814344e-05 secs.
Created 160 schedules in 7.939338684082031e-05 secs.
Remaining 170 schedules in est. 8.435547351837157e-05 secs.
Created 161 schedules in 8.034706115722656e-05 secs.
Remaining 169 schedules in est. 8.433946171162291e-05 secs.
Created 162 schedules in 8.153915405273438e-05 secs.
Remaining 168 schedules in est. 8.455912272135417e-05 secs.
Created 163 schedules in 8.225440979003906e-05 secs.
Remaining 167 schedules in est. 8.427292291372101e-05 secs.
Created 164 schedules in 8.320808410644531e-05 secs.
Remaining 166 schedules in est. 8.422281683945074e-05 secs.
Created 165 schedules in 8.416175842285156e-05 secs.
Remaining 165 schedules in est. 8.416175842285155e-05 secs.
Created 166 schedules in 8.416175842285156e-05 secs.
Remaining 164 schedules in est. 8.31477613334196e-05 secs.
Created 167 schedules in 8.416175842285156e-05 secs.
Remaining 163 schedules in est. 8.214590792170542e-05 secs.
Created 168 schedules in 8.416175842285156e-05 secs.
Remaining 162 schedules in est. 8.115598133632116e-05 secs.
Created 169 schedules in 8.511543273925781e-05 secs.
Remaining 161 schedules in est. 8.10862998285237e-05 secs.
Created 170 schedules in 8.606910705566406e-05 secs.
Remaining 160 schedules in est. 8.100621840533088e-05 secs.
Created 171 schedules in 8.702278137207031e-05 secs.
Remaining 159 schedules in est. 8.09159195213987e-05 secs.
Created 172 schedules in 8.702278137207031e-05 secs.
Remaining 158 schedules in est. 7.993953172550646e-05 secs.
Created 173 schedules in 8.702278137207031e-05 secs.
Remaining 157 schedules in est. 7.897443164979792e-05 secs.
Created 174 schedules in 8.702278137207031e-05 secs.
Remaining 156 schedules in est. 7.802042467840787e-05 secs.
Created 175 schedules in 8.702278137207031e-05 secs.
Remaining 155 schedules in est. 7.707732064383372e-05 secs.
Created 176 schedules in 8.702278137207031e-05 secs.
Remaining 154 schedules in est. 7.614493370056152e-05 secs.
Created 177 schedules in 8.702278137207031e-05 secs.
Remaining 153 schedules in est. 7.522308220297603e-05 secs.
Created 178 schedules in 8.821487426757812e-05 secs.
Remaining 152 schedules in est. 7.532955555433638e-05 secs.
Created 179 schedules in 8.916854858398438e-05 secs.
Remaining 151 schedules in est. 7.522039573285832e-05 secs.
Created 180 schedules in 9.012222290039062e-05 secs.
Remaining 150 schedules in est. 7.510185241699219e-05 secs.
Created 181 schedules in 9.107589721679688e-05 secs.
Remaining 149 schedules in est. 7.497408113426926e-05 secs.
Created 182 schedules in 9.226799011230469e-05 secs.
Remaining 148 schedules in est. 7.503111283857744e-05 secs.
Created 183 schedules in 9.298324584960938e-05 secs.
Remaining 147 schedules in est. 7.469145978083376e-05 secs.
Created 184 schedules in 9.298324584960938e-05 secs.
Remaining 146 schedules in est. 7.378018420675527e-05 secs.
Created 185 schedules in 9.393692016601562e-05 secs.
Remaining 145 schedules in est. 7.362623472471496e-05 secs.
Created 186 schedules in 9.512901306152344e-05 secs.
Remaining 144 schedules in est. 7.36482681766633e-05 secs.
Created 187 schedules in 9.608268737792969e-05 secs.
Remaining 143 schedules in est. 7.347499623018153e-05 secs.
Created 188 schedules in 9.608268737792969e-05 secs.
Remaining 142 schedules in est. 7.257309365779796e-05 secs.
Created 189 schedules in 9.608268737792969e-05 secs.
Remaining 141 schedules in est. 7.168073502797928e-05 secs.
Created 190 schedules in 9.608268737792969e-05 secs.
Remaining 140 schedules in est. 7.079776964689557e-05 secs.
Created 191 schedules in 9.608268737792969e-05 secs.
Remaining 139 schedules in est. 6.992404997660852e-05 secs.
Created 192 schedules in 9.608268737792969e-05 secs.
Remaining 138 schedules in est. 6.905943155288696e-05 secs.
Created 193 schedules in 9.608268737792969e-05 secs.
Remaining 137 schedules in est. 6.820377290557702e-05 secs.
Created 194 schedules in 9.608268737792969e-05 secs.
Remaining 136 schedules in est. 6.735693548143525e-05 secs.
Created 195 schedules in 9.608268737792969e-05 secs.
Remaining 135 schedules in est. 6.651878356933594e-05 secs.
Created 196 schedules in 9.72747802734375e-05 secs.
Remaining 134 schedules in est. 6.650418651347258e-05 secs.
Created 197 schedules in 9.822845458984375e-05 secs.
Remaining 133 schedules in est. 6.63166723880671e-05 secs.
Created 198 schedules in 9.918212890625e-05 secs.
Remaining 132 schedules in est. 6.612141927083334e-05 secs.
Created 199 schedules in 0.00010037422180175781 secs.
Remaining 131 schedules in est. 6.607549274387072e-05 secs.
Created 200 schedules in 0.00010132789611816406 secs.
Remaining 130 schedules in est. 6.586313247680664e-05 secs.
Created 201 schedules in 0.00010204315185546875 secs.
Remaining 129 schedules in est. 6.54903810415695e-05 secs.
Created 202 schedules in 0.000102996826171875 secs.
Remaining 128 schedules in est. 6.526531559405941e-05 secs.
Created 203 schedules in 0.00010418891906738281 secs.
Remaining 127 schedules in est. 6.518223015545624e-05 secs.
Created 204 schedules in 0.00010514259338378906 secs.
Remaining 126 schedules in est. 6.49410135605756e-05 secs.
Created 205 schedules in 0.00010514259338378906 secs.
Remaining 125 schedules in est. 6.411133742913968e-05 secs.
Created 206 schedules in 0.00010514259338378906 secs.
Remaining 124 schedules in est. 6.328971640577594e-05 secs.
Created 207 schedules in 0.00010514259338378906 secs.
Remaining 123 schedules in est. 6.24760337497877e-05 secs.
Created 208 schedules in 0.00010609626770019531 secs.
Remaining 122 schedules in est. 6.222954163184533e-05 secs.
Created 209 schedules in 0.00010728836059570312 secs.
Remaining 121 schedules in est. 6.211431402909129e-05 secs.
Created 210 schedules in 0.00010800361633300781 secs.
Remaining 120 schedules in est. 6.171635219029017e-05 secs.
Created 211 schedules in 0.00010800361633300781 secs.
Remaining 119 schedules in est. 6.09119921498954e-05 secs.
Created 212 schedules in 0.00010800361633300781 secs.
Remaining 118 schedules in est. 6.01152204117685e-05 secs.
Created 213 schedules in 0.00010895729064941406 secs.
Remaining 117 schedules in est. 5.984977937080491e-05 secs.
Created 214 schedules in 0.00010991096496582031 secs.
Remaining 116 schedules in est. 5.957790624315493e-05 secs.
Created 215 schedules in 0.00011086463928222656 secs.
Remaining 115 schedules in est. 5.9299690778865365e-05 secs.
Created 216 schedules in 0.00011086463928222656 secs.
Remaining 114 schedules in est. 5.851189295450846e-05 secs.
Created 217 schedules in 0.00011086463928222656 secs.
Remaining 113 schedules in est. 5.773135593959263e-05 secs.
Created 218 schedules in 0.00011086463928222656 secs.
Remaining 112 schedules in est. 5.69579798147219e-05 secs.
Created 219 schedules in 0.00011181831359863281 secs.
Remaining 111 schedules in est. 5.667503565958101e-05 secs.
Created 220 schedules in 0.00011277198791503906 secs.
Remaining 110 schedules in est. 5.638599395751953e-05 secs.
Created 221 schedules in 0.00011277198791503906 secs.
Remaining 109 schedules in est. 5.5620573225064515e-05 secs.
Created 222 schedules in 0.00011277198791503906 secs.
Remaining 108 schedules in est. 5.486204817488387e-05 secs.
Created 223 schedules in 0.00011277198791503906 secs.
Remaining 107 schedules in est. 5.411032603995148e-05 secs.
Created 224 schedules in 0.00011372566223144531 secs.
Remaining 106 schedules in est. 5.381660802023751e-05 secs.
Created 225 schedules in 0.00011467933654785156 secs.
Remaining 105 schedules in est. 5.3517023722330736e-05 secs.
Created 226 schedules in 0.00011467933654785156 secs.
Remaining 104 schedules in est. 5.27727920397193e-05 secs.
Created 227 schedules in 0.00011467933654785156 secs.
Remaining 103 schedules in est. 5.2035117464443655e-05 secs.
Created 228 schedules in 0.00011467933654785156 secs.
Remaining 102 schedules in est. 5.13039137187757e-05 secs.
Created 229 schedules in 0.00011563301086425781 secs.
Remaining 101 schedules in est. 5.099971221524035e-05 secs.
Created 230 schedules in 0.0001163482666015625 secs.
Remaining 100 schedules in est. 5.058620287024457e-05 secs.
Created 231 schedules in 0.00011730194091796875 secs.
Remaining 99 schedules in est. 5.027226039341517e-05 secs.
Created 232 schedules in 0.00011849403381347656 secs.
Remaining 98 schedules in est. 5.005351428327889e-05 secs.
Created 233 schedules in 0.00011944770812988281 secs.
Remaining 97 schedules in est. 4.972715746179671e-05 secs.
Created 234 schedules in 0.00011944770812988281 secs.
Remaining 96 schedules in est. 4.9004187950721156e-05 secs.
Created 235 schedules in 0.00012063980102539062 secs.
Remaining 95 schedules in est. 4.876928126558345e-05 secs.
Created 236 schedules in 0.00012063980102539062 secs.
Remaining 94 schedules in est. 4.8051446171130164e-05 secs.
Created 237 schedules in 0.00012063980102539062 secs.
Remaining 93 schedules in est. 4.7339668756798855e-05 secs.
Created 238 schedules in 0.00012063980102539062 secs.
Remaining 92 schedules in est. 4.663387266527705e-05 secs.
Created 239 schedules in 0.00012159347534179688 secs.
Remaining 91 schedules in est. 4.6297097305872446e-05 secs.
Created 240 schedules in 0.00012254714965820312 secs.
Remaining 90 schedules in est. 4.595518112182617e-05 secs.
Created 241 schedules in 0.00012350082397460938 secs.
Remaining 89 schedules in est. 4.560818810680595e-05 secs.
Created 242 schedules in 0.0001246929168701172 secs.
Remaining 88 schedules in est. 4.53428788618608e-05 secs.
Created 243 schedules in 0.00012564659118652344 secs.
Remaining 87 schedules in est. 4.498458202974296e-05 secs.
Created 244 schedules in 0.00012564659118652344 secs.
Remaining 86 schedules in est. 4.4285273942791046e-05 secs.
Created 245 schedules in 0.00012564659118652344 secs.
Remaining 85 schedules in est. 4.3591674493283644e-05 secs.
Created 246 schedules in 0.00012564659118652344 secs.
Remaining 84 schedules in est. 4.290371406369093e-05 secs.
Created 247 schedules in 0.00012636184692382812 secs.
Remaining 83 schedules in est. 4.2461673257804594e-05 secs.
Created 248 schedules in 0.00012731552124023438 secs.
Remaining 82 schedules in est. 4.2096261055238785e-05 secs.
Created 249 schedules in 0.00012731552124023438 secs.
Remaining 81 schedules in est. 4.141589245164251e-05 secs.
Created 250 schedules in 0.00012826919555664062 secs.
Remaining 80 schedules in est. 4.1046142578125006e-05 secs.
Created 251 schedules in 0.00012826919555664062 secs.
Remaining 79 schedules in est. 4.0371579477986487e-05 secs.
Created 252 schedules in 0.00012826919555664062 secs.
Remaining 78 schedules in est. 3.9702370053245906e-05 secs.
Created 253 schedules in 0.00012946128845214844 secs.
Remaining 77 schedules in est. 3.940126170282779e-05 secs.
Created 254 schedules in 0.00013017654418945312 secs.
Remaining 76 schedules in est. 3.895046204093873e-05 secs.
Created 255 schedules in 0.00013017654418945312 secs.
Remaining 75 schedules in est. 3.828721887925092e-05 secs.
Created 256 schedules in 0.00013017654418945312 secs.
Remaining 74 schedules in est. 3.7629157304763794e-05 secs.
Created 257 schedules in 0.00013017654418945312 secs.
Remaining 73 schedules in est. 3.697621683202365e-05 secs.
Created 258 schedules in 0.00013017654418945312 secs.
Remaining 72 schedules in est. 3.632833791333576e-05 secs.
Created 259 schedules in 0.00013136863708496094 secs.
Remaining 71 schedules in est. 3.6012251864989294e-05 secs.
Created 260 schedules in 0.0001323223114013672 secs.
Remaining 70 schedules in est. 3.5625237684983476e-05 secs.
Created 261 schedules in 0.0001323223114013672 secs.
Remaining 69 schedules in est. 3.498176048541892e-05 secs.
Created 262 schedules in 0.00013327598571777344 secs.
Remaining 68 schedules in est. 3.4590713850414475e-05 secs.
Created 263 schedules in 0.00013327598571777344 secs.
Remaining 67 schedules in est. 3.3952437426200834e-05 secs.
Created 264 schedules in 0.00013327598571777344 secs.
Remaining 66 schedules in est. 3.331899642944336e-05 secs.
Created 265 schedules in 0.0001342296600341797 secs.
Remaining 65 schedules in est. 3.292425623479879e-05 secs.
Created 266 schedules in 0.00013518333435058594 secs.
Remaining 64 schedules in est. 3.252531352796053e-05 secs.
Created 267 schedules in 0.00013518333435058594 secs.
Remaining 63 schedules in est. 3.189719125126185e-05 secs.
Created 268 schedules in 0.0001361370086669922 secs.
Remaining 62 schedules in est. 3.149438260206536e-05 secs.
Created 269 schedules in 0.0001373291015625 secs.
Remaining 61 schedules in est. 3.114154347699814e-05 secs.
Created 270 schedules in 0.0001373291015625 secs.
Remaining 60 schedules in est. 3.0517578125e-05 secs.
Created 271 schedules in 0.00013828277587890625 secs.
Remaining 59 schedules in est. 3.010584419503863e-05 secs.
Created 272 schedules in 0.00013828277587890625 secs.
Remaining 58 schedules in est. 2.9486768385943243e-05 secs.
Created 273 schedules in 0.0001392364501953125 secs.
Remaining 57 schedules in est. 2.9071346744076235e-05 secs.
Created 274 schedules in 0.00014019012451171875 secs.
Remaining 56 schedules in est. 2.8651996250570254e-05 secs.
Created 275 schedules in 0.00014019012451171875 secs.
Remaining 55 schedules in est. 2.803802490234375e-05 secs.
Created 276 schedules in 0.00014138221740722656 secs.
Remaining 54 schedules in est. 2.7661738188370414e-05 secs.
Created 277 schedules in 0.0001423358917236328 secs.
Remaining 53 schedules in est. 2.723394318177812e-05 secs.
Created 278 schedules in 0.0001423358917236328 secs.
Remaining 52 schedules in est. 2.662397974686657e-05 secs.
Created 279 schedules in 0.00014328956604003906 secs.
Remaining 51 schedules in est. 2.6192716372910366e-05 secs.
Created 280 schedules in 0.0001442432403564453 secs.
Remaining 50 schedules in est. 2.5757721492222375e-05 secs.
Created 281 schedules in 0.0001442432403564453 secs.
Remaining 49 schedules in est. 2.5152735862867686e-05 secs.
Created 282 schedules in 0.0001442432403564453 secs.
Remaining 48 schedules in est. 2.4552040911735376e-05 secs.
Created 283 schedules in 0.00014519691467285156 secs.
Remaining 47 schedules in est. 2.4113975228353443e-05 secs.
Created 284 schedules in 0.0001461505889892578 secs.
Remaining 46 schedules in est. 2.3672278498260067e-05 secs.
Created 285 schedules in 0.0001461505889892578 secs.
Remaining 45 schedules in est. 2.3076408787777548e-05 secs.
Created 286 schedules in 0.0001468658447265625 secs.
Remaining 44 schedules in est. 2.2594745342548075e-05 secs.
Created 287 schedules in 0.0001480579376220703 secs.
Remaining 43 schedules in est. 2.2182896577522733e-05 secs.
Created 288 schedules in 0.0001480579376220703 secs.
Remaining 42 schedules in est. 2.1591782569885254e-05 secs.
Created 289 schedules in 0.000148773193359375 secs.
Remaining 41 schedules in est. 2.110623158385597e-05 secs.
Created 290 schedules in 0.000148773193359375 secs.
Remaining 40 schedules in est. 2.0520440463362066e-05 secs.
Created 291 schedules in 0.00014972686767578125 secs.
Remaining 39 schedules in est. 2.0066487420465528e-05 secs.
Created 292 schedules in 0.00014972686767578125 secs.
Remaining 38 schedules in est. 1.9485003327670165e-05 secs.
Created 293 schedules in 0.00015091896057128906 secs.
Remaining 37 schedules in est. 1.9058025737671315e-05 secs.
Created 294 schedules in 0.0001518726348876953 secs.
Remaining 36 schedules in est. 1.8596649169921875e-05 secs.
Created 295 schedules in 0.0001518726348876953 secs.
Remaining 35 schedules in est. 1.8018787190065546e-05 secs.
Created 296 schedules in 0.00015282630920410156 secs.
Remaining 34 schedules in est. 1.7554373354525178e-05 secs.
Created 297 schedules in 0.00015282630920410156 secs.
Remaining 33 schedules in est. 1.6980701022677953e-05 secs.
Created 298 schedules in 0.0001537799835205078 secs.
Remaining 32 schedules in est. 1.6513286820994126e-05 secs.
Created 299 schedules in 0.0001537799835205078 secs.
Remaining 31 schedules in est. 1.5943744110821882e-05 secs.
Created 300 schedules in 0.00015473365783691406 secs.
Remaining 30 schedules in est. 1.5473365783691408e-05 secs.
Created 301 schedules in 0.00015473365783691406 secs.
Remaining 29 schedules in est. 1.4907893944420292e-05 secs.
Created 302 schedules in 0.0001556873321533203 secs.
Remaining 28 schedules in est. 1.443458708706281e-05 secs.
Created 303 schedules in 0.00015687942504882812 secs.
Remaining 27 schedules in est. 1.3979354707321317e-05 secs.
Created 304 schedules in 0.00015687942504882812 secs.
Remaining 26 schedules in est. 1.341731924759714e-05 secs.
Created 305 schedules in 0.00015783309936523438 secs.
Remaining 25 schedules in est. 1.2937139292232327e-05 secs.
Created 306 schedules in 0.00015878677368164062 secs.
Remaining 24 schedules in est. 1.2453864602481617e-05 secs.
Created 307 schedules in 0.00015878677368164062 secs.
Remaining 23 schedules in est. 1.1896077507093597e-05 secs.
Created 308 schedules in 0.00015974044799804688 secs.
Remaining 22 schedules in est. 1.141003199986049e-05 secs.
Created 309 schedules in 0.00015974044799804688 secs.
Remaining 21 schedules in est. 1.0856146951323576e-05 secs.
Created 310 schedules in 0.0001609325408935547 secs.
Remaining 20 schedules in est. 1.0382744573777721e-05 secs.
Created 311 schedules in 0.0001609325408935547 secs.
Remaining 19 schedules in est. 9.831891565844177e-06 secs.
Created 312 schedules in 0.0001609325408935547 secs.
Remaining 18 schedules in est. 9.284569666935848e-06 secs.
Created 313 schedules in 0.00016188621520996094 secs.
Remaining 17 schedules in est. 8.792542040157623e-06 secs.
Created 314 schedules in 0.00016188621520996094 secs.
Remaining 16 schedules in est. 8.2489791189789e-06 secs.
Created 315 schedules in 0.0001628398895263672 secs.
Remaining 15 schedules in est. 7.754280453636531e-06 secs.
Created 316 schedules in 0.000164031982421875 secs.
Remaining 14 schedules in est. 7.267239727551424e-06 secs.
Created 317 schedules in 0.000164031982421875 secs.
Remaining 13 schedules in est. 6.726863632442823e-06 secs.
Created 318 schedules in 0.000164031982421875 secs.
Remaining 12 schedules in est. 6.189886129127359e-06 secs.
Created 319 schedules in 0.00016498565673828125 secs.
Remaining 11 schedules in est. 5.689160577182113e-06 secs.
Created 320 schedules in 0.00016498565673828125 secs.
Remaining 10 schedules in est. 5.155801773071289e-06 secs.
Created 321 schedules in 0.00016498565673828125 secs.
Remaining 9 schedules in est. 4.625766076774241e-06 secs.
Created 322 schedules in 0.00016498565673828125 secs.
Remaining 8 schedules in est. 4.099022527659161e-06 secs.
Created 323 schedules in 0.00016570091247558594 secs.
Remaining 7 schedules in est. 3.591041446839324e-06 secs.
Created 324 schedules in 0.00016570091247558594 secs.
Remaining 6 schedules in est. 3.0685354162145544e-06 secs.
Created 325 schedules in 0.0001666545867919922 secs.
Remaining 5 schedules in est. 2.563916719876803e-06 secs.
Created 326 schedules in 0.00016760826110839844 secs.
Remaining 4 schedules in est. 2.0565430810846436e-06 secs.
Created 327 schedules in 0.0001685619354248047 secs.
Remaining 3 schedules in est. 1.5464397745394924e-06 secs.
Created 328 schedules in 0.0001697540283203125 secs.
Remaining 2 schedules in est. 1.035085538538491e-06 secs.
Created 329 schedules in 0.0001697540283203125 secs.
Remaining 1 schedules in est. 5.159696909431991e-07 secs.
Created 330 schedules in 0.0001697540283203125 secs.
Remaining 0 schedules in est. 0.0 secs.</code></pre>
</div>
</div>
<div id="c3cb2d89" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations_with_replacement</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_all_schedules(N, T):</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> itertools <span class="im">import</span> combinations_with_replacement</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Start timing</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate the combinations</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    schedules <span class="op">=</span> <span class="bu">list</span>(combinations_with_replacement(<span class="bu">range</span>(T), N))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert combinations into the desired format using np.bincount</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> comb <span class="kw">in</span> schedules:</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>        schedule <span class="op">=</span> np.bincount(comb, minlength<span class="op">=</span>T)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>        result.append(schedule.tolist())</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># End timing</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>    end_time <span class="op">=</span> time.time()</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Number of possible schedules: </span><span class="sc">{</span><span class="bu">len</span>(result)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Time taken: </span><span class="sc">{</span>end_time <span class="op">-</span> start_time<span class="sc">}</span><span class="ss"> seconds"</span>)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>schedules <span class="op">=</span> generate_all_schedules(N, T)</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(schedules[:<span class="dv">15</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of possible schedules: 51895935
Time taken: 489.20051193237305 seconds
[[12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0], [11, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0]]</code></pre>
</div>
</div>
<div id="b0535858" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> combinations_with_replacement</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> serialize_schedules(N, T):</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> itertools <span class="im">import</span> combinations_with_replacement</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    file_path<span class="op">=</span><span class="ss">f"experiments/n</span><span class="sc">{</span>N<span class="sc">}</span><span class="ss">t</span><span class="sc">{</span>T<span class="sc">}</span><span class="ss">.pickle"</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Start timing</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Open a file for writing serialized schedules</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(file_path, <span class="st">'wb'</span>) <span class="im">as</span> f:</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> comb <span class="kw">in</span> combinations_with_replacement(<span class="bu">range</span>(T), N):</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>            schedule <span class="op">=</span> np.bincount(comb, minlength<span class="op">=</span>T).tolist()</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>            pickle.dump(schedule, f)</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># End timing</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    end_time <span class="op">=</span> time.time()</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Number of possible schedules: </span><span class="sc">{</span>math<span class="sc">.</span>comb(N<span class="op">+</span>T<span class="op">-</span><span class="dv">1</span>, N)<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Time taken: </span><span class="sc">{</span>end_time <span class="op">-</span> start_time<span class="sc">}</span><span class="ss"> seconds"</span>)</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Schedules are serialized and saved to </span><span class="sc">{</span>file_path<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_schedules(file_path):</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Start timing</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    schedules <span class="op">=</span> []</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(file_path, <span class="st">'rb'</span>) <span class="im">as</span> f:</span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>                schedules.append(pickle.load(f))</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">except</span> <span class="pp">EOFError</span>:</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>        <span class="co"># End timing</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>    end_time <span class="op">=</span> time.time()</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Loading time: </span><span class="sc">{</span>end_time <span class="op">-</span> start_time<span class="sc">}</span><span class="ss"> seconds"</span>)</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> schedules</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>serialize_schedules(N, T)</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>file_path<span class="op">=</span><span class="ss">f"experiments/n</span><span class="sc">{</span>N<span class="sc">}</span><span class="ss">t</span><span class="sc">{</span>T<span class="sc">}</span><span class="ss">.pickle"</span></span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>schedules <span class="op">=</span> load_schedules(file_path)</span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(schedules))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of possible schedules: 51895935
Time taken: 136.1979901790619 seconds
Schedules are serialized and saved to experiments/n12t18.pickle
Loading time: 406.0416269302368 seconds
51895935</code></pre>
</div>
</div>
<div id="91ea58b4" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> generate_random_schedule(N, T):</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="im">import</span> random</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  slots <span class="op">=</span> random.choices(<span class="bu">range</span>(T), k <span class="op">=</span> N)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  schedule <span class="op">=</span> [<span class="dv">0</span>]<span class="op">*</span>T</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> slot <span class="kw">in</span> slots:</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    schedule[slot] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span>(schedule)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>generate_random_schedule(N, T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>[0, 2, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 3, 0, 1, 1, 1]</code></pre>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>